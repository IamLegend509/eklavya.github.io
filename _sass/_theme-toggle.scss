/* Theme Toggle Button Styles */
#theme-toggle {
  position: fixed;
  top: 1rem;
  right: 1rem;
  z-index: 1000;
  border: none;
  background: transparent;
  padding: 0.5rem;
  cursor: pointer;
  color: var(--global-text-color); /* Default icon color, will be overridden by theme */
}

#theme-toggle:focus {
  outline: none;
  box-shadow: none;
}

#theme-toggle svg {
  width: 24px; /* Increased size for better visibility */
  height: 24px; /* Increased size for better visibility */
}

/* Light theme (default) variables */
body {
  --global-bg-color: #ffffff;
  --global-text-color: #212529;
  --global-link-color: #007bff;
  --global-header-bg: #f8f9fa;
  --global-footer-bg: #f8f9fa;
  --global-card-bg: #ffffff;
  --global-card-border-color: rgba(0,0,0,.125);
  --global-code-bg: #e9ecef;
  --global-code-text-color: #212529;
  --global-navbar-text-color: rgba(0, 0, 0, 0.55);
  --global-navbar-hover-color: rgba(0, 0, 0, 0.7);
  --global-navbar-active-color: rgba(0, 0, 0, 0.9);
  --global-blockquote-border-color: #eee;
  --global-blockquote-text-color: #6c757d;
  --global-table-border-color: #dee2e6;
  --global-hr-color: rgba(0,0,0,.1);
  --global-distill-app-color: #212529; /* For distill articles */
  --global-distill-app-background-color: #ffffff;
  --global-distill-header-color: #212529; /* Distill header */
  --global-distill-post-text-color: #212529;
  --global-distill-code-color: #212529;
  --global-distill-code-background-color: #f8f9fa;
  --global-distill-figcaption-color: rgba(0,0,0,0.6);
  --global-distill-dt-aside-text-color: rgba(0,0,0,0.6);

  transition: background-color 0.2s ease, color 0.2s ease;
}

/* Dark Theme Variables & Styles - Minimal Inverse */
body.dark-theme {
  --global-bg-color: #212529; /* Dark background (inverse of light theme text) */
  --global-text-color: #f8f9fa; /* Light text (inverse of light theme background) */
  --global-link-color: #7fbfff; /* Softer blue for links */
  --global-header-bg: #212529; /* Match background */
  --global-footer-bg: #212529; /* Match background */
  --global-card-bg: #2c3237; /* Slightly lighter than background */
  --global-card-border-color: #495057; /* Subtle border */
  --global-code-bg: #2c3237; /* Match card background */
  --global-code-text-color: #f8f9fa; /* Match text color */
  --global-navbar-text-color: rgba(248, 249, 250, 0.75); /* Slightly dimmed text */
  --global-navbar-hover-color: #ffffff; /* Full white on hover */
  --global-navbar-active-color: #ffffff; /* Full white for active */
  --global-blockquote-border-color: #495057; /* Subtle border */
  --global-blockquote-text-color: #adb5bd; /* Slightly dimmed text */
  --global-table-border-color: #495057; /* Subtle border */
  --global-hr-color: #495057; /* Subtle border */
  --global-distill-app-color: #f8f9fa;
  --global-distill-app-background-color: #212529;
  --global-distill-header-color: #f8f9fa;
  --global-distill-post-text-color: #f8f9fa;
  --global-distill-code-color: #f8f9fa;
  --global-distill-code-background-color: #2c3237;
  --global-distill-figcaption-color: rgba(248, 249, 250, 0.7);
  --global-distill-dt-aside-text-color: rgba(248, 249, 250, 0.7);

  background-color: var(--global-bg-color);
  color: var(--global-text-color);

  /* Minimal styling for code blocks */
  pre, code {
    border: 1px solid var(--global-card-border-color);
  }

  /* Simple button styling */
  .btn {
    border: 1px solid var(--global-card-border-color);
    transition: background-color 0.2s ease;
  }

  .btn:hover {
    background-color: var(--global-card-bg);
  }

}

/* Apply theme variables to common elements */
body {
  background-color: var(--global-bg-color);
  color: var(--global-text-color);
}

a {
  color: var(--global-link-color);
  transition: all 0.3s ease;
}

a:hover {
  color: color-mix(in srgb, var(--global-link-color) 80%, black);
}

/* Simple hover effect for dark theme */
body.dark-theme a:hover {
  color: #ffffff; /* Pure white on hover */
}

.navbar, .navbar-light {
  background-color: var(--global-header-bg) !important; /* Important to override Bootstrap */
}

.navbar .navbar-nav .nav-link {
  color: var(--global-navbar-text-color) !important;
}

.navbar .navbar-nav .nav-link:hover {
  color: var(--global-navbar-hover-color) !important;
}

.navbar .navbar-nav .nav-link.active,
.navbar .navbar-nav .show > .nav-link {
  color: var(--global-navbar-active-color) !important;
}

.navbar-brand {
    color: var(--global-navbar-text-color) !important;
}
.navbar-brand:hover {
    color: var(--global-navbar-hover-color) !important;
}


.profile .social a {
  color: var(--global-text-color); /* Ensure social icons in profile match theme */
}
.profile .social a:hover {
  color: var(--global-link-color);
}


footer.fixed-bottom, footer.sticky-bottom {
  background-color: var(--global-footer-bg);
  color: var(--global-text-color);
}

.card {
  background-color: var(--global-card-bg);
  border: 1px solid var(--global-card-border-color);
  color: var(--global-text-color);
  transition: border-color 0.2s ease;
}

.card:hover {
  border-color: var(--global-text-color);
}

.card-header {
  background-color: var(--global-card-bg);
  border-bottom: 1px solid var(--global-card-border-color);
}

.card-body, .card-title, .card-text {
  color: var(--global-text-color);
}

.card-footer {
  background-color: var(--global-card-bg);
  border-top: 1px solid var(--global-card-border-color);
}

/* Simple heading styles */
h1, h2, h3, h4, h5, h6 {
  color: var(--global-text-color);
  border-bottom: 1px solid var(--global-card-border-color);
  padding-bottom: 0.5rem;
  margin-bottom: 1rem;
}

pre, code, kbd, samp {
  background-color: var(--global-code-bg);
  color: var(--global-code-text-color);
}

blockquote {
  border-left-color: var(--global-blockquote-border-color);
  color: var(--global-blockquote-text-color);
}

hr {
  border-top-color: var(--global-hr-color); /* Bootstrap 4 uses border-top-color */
}
/* For Bootstrap 5, hr color is handled by `border-color` on the element */
body.dark-theme hr {
    border-color: var(--global-hr-color);
}


table, .table {
    color: var(--global-text-color); /* Text color for table content */
}

table th, table td, .table th, .table td {
    border-color: var(--global-table-border-color);
}

.table-striped tbody tr:nth-of-type(odd) {
    background-color: color-mix(in srgb, var(--global-bg-color) 95%, var(--global-text-color) 5%);
}
body.dark-theme .table-striped tbody tr:nth-of-type(odd) {
    background-color: color-mix(in srgb, var(--global-bg-color) 90%, white 5%); /* Slightly lighter for dark theme odd stripes */
}

.header {
  background-color: var(--global-header-bg);
}


#theme-toggle {
  color: var(--global-text-color); /* Icon color */
}

body.dark-theme #theme-toggle .feather-sun {
  display: none;
}
body.dark-theme #theme-toggle .feather-moon {
  display: inline-block !important; /* Ensure it shows */
}

body:not(.dark-theme) #theme-toggle .feather-sun {
  display: inline-block !important; /* Ensure it shows */
}
body:not(.dark-theme) #theme-toggle .feather-moon {
  display: none;
}

/* Distill specific theme overrides */
d-app {
  color: var(--global-distill-app-color);
  background-color: var(--global-distill-app-background-color);
}

d-app d-header {
  color: var(--global-distill-header-color);
}

d-article {
  color: var(--global-distill-post-text-color);
}

d-article code {
  color: var(--global-distill-code-color);
  background-color: var(--global-distill-code-background-color);
}
d-article pre code { /* Ensure nested code in pre also gets styled */
  background-color: transparent; /* Often pre has the background */
}

d-article figcaption {
  color: var(--global-distill-figcaption-color);
}

d-appendix dt-article h1, d-appendix dt-article h2, d-appendix dt-article h3, d-appendix dt-article h4, d-appendix dt-article h5, d-appendix dt-article h6 {
    color: var(--global-distill-post-text-color);
}

dt-layout-article .dt-appendix, dt-layout-article .dt-bibliography {
    color: var(--global-distill-post-text-color);
    background-color: var(--global-distill-app-background-color);
}

/* Ensure that aside elements in Distill get themed correctly */
d-article aside, d-article .aside {
    color: var(--global-distill-dt-aside-text-color);
}

/* Further fine-tuning based on potential elements */
.repo-language-color { /* for language color dots if any */
    body.dark-theme & {
        filter: brightness(1.5); /* make them a bit brighter on dark background */
    }
}

/* Search input styling for alfred theme */
.search-input {
    background-color: var(--global-card-bg);
    color: var(--global-text-color);
    border: 1px solid var(--global-card-border-color);
}
.search-results-container {
    background-color: var(--global-card-bg);
    border: 1px solid var(--global-card-border-color);
}
.search-result-item {
    color: var(--global-text-color);
}
.search-result-item:hover {
    background-color: color-mix(in srgb, var(--global-card-bg) 80%, var(--global-link-color) 20%);
}
.search-result-item strong {
    color: var(--global-link-color);
}

/* Pagination */
.pagination .page-item .page-link {
    background-color: var(--global-card-bg);
    color: var(--global-link-color);
    border-color: var(--global-card-border-color);
}
.pagination .page-item.active .page-link {
    background-color: var(--global-link-color);
    border-color: var(--global-link-color);
    color: var(--global-bg-color); /* Text color on active page link */
}
.pagination .page-item.disabled .page-link {
    color: #6c757d; /* Default Bootstrap disabled color */
    background-color: var(--global-card-bg);
    border-color: var(--global-card-border-color);
}
body.dark-theme .pagination .page-item.disabled .page-link {
    color: #888; /* Lighter disabled color for dark theme */
}

/* Ensure TOC sidebar links are themed */
#toc-sidebar .nav-link {
    color: var(--global-text-color);
}
#toc-sidebar .nav-link:hover,
#toc-sidebar .nav-link.active {
    color: var(--global-link-color);
    border-left-color: var(--global-link-color);
}
body.dark-theme #toc-sidebar {
    /* If the TOC has a background or border, theme it */
    /* background-color: var(--global-card-bg); */
    /* border: 1px solid var(--global-card-border-color); */
}

/* Adjusting academic icons if they exist and are SVGs or font icons */
.academicons {
    color: var(--global-text-color);
}
body.dark-theme .academicons {
    color: var(--global-text-color); /* Should already be covered, but explicit */
}
a:hover .academicons {
    color: var(--global-link-color);
}


/* Misc Adjustments for better dark theme */
body.dark-theme img,
body.dark-theme svg {
    /* Consider if images need adjustment, e.g., if they have transparent backgrounds meant for light themes */
    /* filter: brightness(.8) contrast(1.2); */ /* Example: slightly darken and increase contrast */
}

body.dark-theme .badge {
    color: var(--global-bg-color); /* Text color for badges in dark mode */
    background-color: var(--global-link-color); /* Use link color for badge background */
}
body.dark-theme .badge.badge-secondary { /* Example for a specific badge type */
    background-color: var(--global-text-color);
    color: var(--global-bg-color);
}

/* Ensure that selection color is also themed for better readability */
::selection {
  background-color: var(--global-link-color);
  color: var(--global-bg-color); /* Or a very light color if link color is light */
}

body.dark-theme ::selection {
  background-color: var(--global-link-color); /* Orange in dark theme */
  color: #000000; /* Black text on orange selection */
}


/* Style for project cards, if they use a specific class not covered by .card */
.project-card {
  background-color: var(--global-card-bg);
  border: 1px solid var(--global-card-border-color);
  color: var(--global-text-color);
}
.project-card h5 a { /* Title inside project card */
    color: var(--global-link-color);
}
.project-card .card-text, .project-card p {
    color: var(--global-text-color);
}


/* For any .btn-primary, .btn-secondary, etc. ensure they are themed */
.btn-primary {
    background-color: var(--global-link-color);
    border-color: var(--global-link-color);
    color: var(--global-bg-color); /* Text color for primary button */
}
.btn-primary:hover {
    background-color: color-mix(in srgb, var(--global-link-color) 80%, black);
    border-color: color-mix(in srgb, var(--global-link-color) 80%, black);
}
.btn-secondary {
    background-color: var(--global-text-color);
    border-color: var(--global-text-color);
    color: var(--global-bg-color);
}
body.dark-theme .btn-secondary {
    background-color: var(--global-card-border-color); /* A less prominent color for secondary buttons in dark mode */
    border-color: var(--global-card-border-color);
    color: var(--global-text-color);
}
.btn-secondary:hover {
     background-color: color-mix(in srgb, var(--global-text-color) 80%, white);
     border-color: color-mix(in srgb, var(--global-text-color) 80%, white);
}
body.dark-theme .btn-secondary:hover {
     background-color: color-mix(in srgb, var(--global-card-border-color) 80%, white);
     border-color: color-mix(in srgb, var(--global-card-border-color) 80%, white);
}

/* Make sure placeholder colors are also adapted */
input::placeholder, textarea::placeholder {
    color: color-mix(in srgb, var(--global-text-color) 70%, transparent);
}
body.dark-theme input::placeholder, body.dark-theme textarea::placeholder {
    color: color-mix(in srgb, var(--global-text-color) 50%, transparent);
}

/* Ensure form controls are legible */
.form-control {
    background-color: var(--global-bg-color);
    color: var(--global-text-color);
    border: 1px solid var(--global-card-border-color);
}
.form-control:focus {
    background-color: var(--global-bg-color);
    color: var(--global-text-color);
    border-color: var(--global-link-color);
    box-shadow: 0 0 0 0.2rem color-mix(in srgb, var(--global-link-color) 25%, transparent);
}
body.dark-theme .form-control {
    background-color: var(--global-card-bg); /* Use card bg for inputs for slight contrast */
}
body.dark-theme .form-control:focus {
    background-color: var(--global-card-bg);
}

/* For _includes/projects.html thumbnail handling */
.thumbnail {
    border-color: var(--global-card-border-color) !important;
}
.caption {
    background-color: var(--global-card-bg) !important;
    color: var(--global-text-color) !important;
}
.caption h3 {
    color: var(--global-text-color) !important;
}
.caption p {
    color: var(--global-text-color) !important;
}


/* Style for task page or any other specific page elements */
/* Example: .task-item */
.task-item {
    background-color: var(--global-card-bg);
    border: 1px solid var(--global-card-border-color);
}
.task-item h4 a {
    color: var(--global-link-color);
}

/* Final override for toggle button icon colors with neon effects */
#theme-toggle {
  background: transparent;
  border: none;
  padding: 0.5rem;
  cursor: pointer;
  opacity: 0.75;
  transition: opacity 0.2s ease;
}

#theme-toggle:hover {
  opacity: 1;
}

#theme-toggle .feather-sun {
  color: #495057; /* Muted color for sun icon */
}

#theme-toggle .feather-moon {
  color: #495057; /* Muted color for moon icon */
}

body.dark-theme #theme-toggle {
  background: transparent;
}

body.dark-theme #theme-toggle .feather-sun {
  color: #f8f9fa; /* Light color for sun icon */
}

body.dark-theme #theme-toggle .feather-moon {
  color: #f8f9fa; /* Light color for moon icon */
}

/* Ensure that if bootstrap icons are used elsewhere, they pick up the theme */
.bi { /* Assuming Bootstrap Icons are used with class .bi */
    color: inherit; /* Inherit color from parent by default */
}

/* If you use FontAwesome icons */
.fa, .fas, .far, .fal, .fab {
    color: inherit;
}

/* publications page, bib.html specific styling */
.publications .year {
    color: var(--global-text-color);
}
.publications h2 {
    color: var(--global-text-color); /* Assuming headers on this page */
}
.publications .abbr abbr { /* styling for the [pdf], [doi] etc links */
    background-color: var(--global-code-bg);
    color: var(--global-link-color);
    border: 1px solid var(--global-link-color);
}
.publications .abbr abbr:hover {
    background-color: var(--global-link-color);
    color: var(--global-bg-color);
}
.publications .title {
    color: var(--global-text-color);
}
.publications .author, .publications .periodical {
    color: color-mix(in srgb, var(--global-text-color) 80%, transparent);
}
body.dark-theme .publications .author, body.dark-theme .publications .periodical {
    color: color-mix(in srgb, var(--global-text-color) 70%, transparent);
}
.publications .links a, .publications .links span {
    color: var(--global-link-color);
}
.publications .award {
    color: var(--global-link-color); /* Make award text stand out */
    font-weight: bold;
}
body.dark-theme .publications .award {
    color: #ff8c00; /* Vibrant orange for awards in dark mode */
}

/* Alert styling */
.alert {
    color: var(--global-text-color);
    background-color: var(--global-card-bg); /* Use card background for alerts */
    border-color: var(--global-card-border-color);
}
.alert-heading {
    color: inherit;
}
.alert-link {
    color: var(--global-link-color);
}
.alert-primary {
    color: color-mix(in srgb, #004085 80%, white); /* Dark blue text */
    background-color: #cce5ff; /* Light blue background */
    border-color: #b8daff; /* Lighter blue border */
}
body.dark-theme .alert-primary {
    color: #cce5ff; /* Light blue text */
    background-color: #002752; /* Dark blue background */
    border-color: #003875; /* Darker blue border */
}
.alert-secondary {
    color: color-mix(in srgb, #383d41 80%, white);
    background-color: #e2e3e5;
    border-color: #d6d8db;
}
body.dark-theme .alert-secondary {
    color: #e2e3e5;
    background-color: #2a2e31;
    border-color: #3f4346;
}
/* Add other .alert-success, .alert-danger, .alert-warning, .alert-info with dark theme variants */
.alert-success {
    color: color-mix(in srgb, #155724 80%, white);
    background-color: #d4edda;
    border-color: #c3e6cb;
}
body.dark-theme .alert-success {
    color: #d4edda;
    background-color: #0d3615;
    border-color: #1a5325;
}
.alert-danger {
    color: color-mix(in srgb, #721c24 80%, white);
    background-color: #f8d7da;
    border-color: #f5c6cb;
}
body.dark-theme .alert-danger {
    color: #f8d7da;
    background-color: #491217;
    border-color: #6a1c22;
}
.alert-warning {
    color: color-mix(in srgb, #856404 80%, white);
    background-color: #fff3cd;
    border-color: #ffeeba;
}
body.dark-theme .alert-warning {
    color: #fff3cd; /* Keep text light */
    background-color: #533f03; /* Dark yellow/brown */
    border-color: #665104;
}
.alert-info {
    color: color-mix(in srgb, #0c5460 80%, white);
    background-color: #d1ecf1;
    border-color: #bee5eb;
}
body.dark-theme .alert-info {
    color: #d1ecf1;
    background-color: #073038;
    border-color: #0c4a55;
}
.alert-light {
    color: color-mix(in srgb, #818182 80%, white);
    background-color: #fefefe;
    border-color: #fdfdfe;
}
body.dark-theme .alert-light { /* This will look like a slightly off-white box on dark background */
    color: #333; /* Dark text on light-ish background */
    background-color: #dedede;
    border-color: #cfcfcf;
}
.alert-dark { /* This is bootstrap's dark alert, might be used for primary info on light theme */
    color: color-mix(in srgb, #1b1e21 80%, white);
    background-color: #d6d8d9;
    border-color: #c6c8ca;
}
body.dark-theme .alert-dark { /* This should be very dark text on a lighter dark background */
    color: #d6d8d9; /* Light text */
    background-color: #131517; /* Very dark background, darker than page */
    border-color: #1e2225;
}

/* Social media icons from _includes/social.html if they are styled via .social a */
.social a i { /* If icons are inside <i> tags */
    color: var(--global-text-color);
    transition: color 0.2s ease-in-out;
}
.social a:hover i {
    color: var(--global-link-color);
}

/* News items from _includes/news.html */
.news-item {
    /* Assuming news items might have their own card-like structure or specific classes */
    color: var(--global-text-color);
}
.news-item h5 a {
    color: var(--global-link-color);
}
.news-item .meta {
    color: color-mix(in srgb, var(--global-text-color) 70%, transparent);
}
body.dark-theme .news-item .meta {
    color: color-mix(in srgb, var(--global-text-color) 60%, transparent);
}

/* Remove any remaining box shadows */
.btn, .card, .navbar, .form-control, pre, code {
  box-shadow: none !important;
}

/* Simpler button hover effect */
.btn:hover {
  opacity: 0.9;
}

/* Minimal scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--global-bg-color);
}

::-webkit-scrollbar-thumb {
  background: var(--global-card-border-color);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--global-text-color);
}

/* Logo theme switching styles */
#logo-light, #logo-dark, #about-logo-light, #about-logo-dark {
  transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
  object-fit: contain;
  vertical-align: middle;
}

.navbar-brand {
  height: auto;
  padding: 0.5rem 0;
  display: flex;
  align-items: center;
}

.logo-container {
  display: inline-block;
  position: relative !important;
}

.logo-container img {
  transition: opacity 0.2s ease-in-out;
}

/* Fix navbar overlap issues */
body {
  padding-top: 0;
}

/* Add padding for fixed navbar if needed */
.navbar.fixed-top + main,
.navbar.fixed-top + .container,
.navbar.fixed-top ~ main {
  padding-top: 70px;
} 